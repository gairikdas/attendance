<! DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Attendance Check-In</title>
</head>
<body>
    <div id="location-request">
        <h2>Attendance Check-In</h2>
        <p>Please enable location to proceed.</p>
        <button onclick="getLocation()">Enable Location</button>
        <p id="location-status"></p>
    </div>
    <form id="attendance-form" style="display:none;">
        <label>Name: <input type="text" name="name" required></label><br>
        <input type="hidden" name="latitude" id="latitude">
        <input type="hidden" name="longitude" id="longitude">
        <button type="submit">Submit Attendance</button>
    </form>
    <script>
    // Code Generated by Sidekick is for learning and experimentation purposes only.
    function getLocation() {
        document.getElementById('location-status').innerText = "Requesting location...";
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(pos) {
                // Success!
                document.getElementById('location-request').style.display = 'none';
                document.getElementById('attendance-form').style.display = '';
                document.getElementById('latitude').value = pos.coords.latitude;
                document.getElementById('longitude').value = pos.coords.longitude;
            }, function(error) {
                document.getElementById('location-status').textContent =
                    "Location access denied. Please allow location access to check-in.";
            });
        } else {
            document.getElementById('location-status').textContent = "Geolocation not supported.";
        }
    }

    document.getElementById('attendance-form').onsubmit = function(e) {
        e.preventDefault();
        // Collect form data
        const data = {
            name: this.name.value,
            latitude: this.latitude.value,
            longitude: this.longitude.value
        };
        // Send data to your backend (Google Apps Script, Firebase, etc.)
        fetch('https://script.google.com/macros/s/AKfycbyJfH9kyiafcucdOrO6jgH8P0kBSlHXR0pXjFkuMiWyYuRRgCrKUiefq9nKEGqBeue3/exec', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(data)
        }).then(res => {
            alert('Attendance submitted!');
            this.reset();
            window.location.reload();
        }).catch(err => {
            alert('Submission failed. Try again.');
        });
    };
    </script>
</body>
</html>

